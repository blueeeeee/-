<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>百度音乐-全选操作</title>
	<style type="text/css">
		body,div,ul,li,input,span{margin: 0;padding: 0;}
		li{list-style: none;width: 300px;line-height: 2em;text-indent: 10px;}
        #main{width: 300px;margin: 50px auto;}
        .list span{width:100px;float: right;}
	    .list li{border-bottom:1px solid #fff;}
	    .choose{background: #F0FFF0;}
        .choose li{display: inline-block;width: 70px;}
        .choose .btn1,.choose .btn2,.choose .btn3{padding:2px 5px 2px 20px;border: none;cursor: pointer;opacity:0.5;}
        .choose .btn1{background:#fff url(images/love.png) no-repeat 3px center;}
        .choose .btn2{background:#fff url(images/plus.png) no-repeat 2px center;}        
        .choose .btn3{background:#fff url(images/x.png) no-repeat 3px center;}
	</style>
</head>
<body>
	<div id="main">
		<ul class="list">
			<li><input type="checkbox"> 私奔<span>梁博，黄勇</span></li>
			<li><input type="checkbox"> 北京北京<span>梁博</span></li>
			<li><input type="checkbox"> 我爱你中国<span>梁博</span></li>
			<li><input type="checkbox"> 花火<span>梁博</span></li>
			<li><input type="checkbox"> 回来<span>梁博</span></li>
			<li><input type="checkbox"> 爱要有你才完美<span>梁博，那英</span></li>
		</ul>
		<ul class="choose">
			<li><input class="all" type="checkbox"> 全选</li>
			<li><input class="btn1" type="button" value="收藏"></li>
			<li><input class="btn2" type="button" value="添加"></li>
			<li><input class="btn3" type="button" value="删除"></li>
		</ul>
	</div>

	<script type="text/javascript">
		window.onload=function(){
			var oList=document.getElementsByClassName('list')[0];
			var aLi=oList.getElementsByTagName('li');
			var aBtn=oList.getElementsByTagName('input');
			var oAll=document.getElementsByClassName('all')[0];
			var oBtn1=document.getElementsByClassName('btn1')[0];
			var oBtn2=document.getElementsByClassName('btn2')[0];
			var oBtn3=document.getElementsByClassName('btn3')[0];
			var aColor=['#E0FFFF','#FFFAF0'];
            var num=0;
            var n=0;
            var open=true;
			
			
			for(var i=0;i<aLi.length;i++){
				aLi[i].index=i;

                aBtn[i].open=true;

                aLi[i].style.background=aColor[aLi[i].index%2];
                
            	aLi[i].onmouseover=function(){
					this.style.background='#E0EEE0';
				}
				aLi[i].onmouseout=function(){
					if(aBtn[this.index].checked==false){
						this.style.background=aColor[this.index%2];
						//oBtn1.style.opacity=oBtn2.style.opacity=oBtn3.style.opacity='0.4';
					}else{
						this.style.background='#E0EEE0';
						oBtn1.style.opacity=oBtn2.style.opacity=oBtn3.style.opacity='1';	
					}
				}
                
				aBtn[i].onclick=function(){
					if(this.open==true){
						num++;
						this.open=false;
					}else{
						num--;
						this.open=true;
					}
					console.log(num);
					if(num==aBtn.length&&n==0){
						oAll.checked=true;
						oBtn1.style.opacity=oBtn2.style.opacity=oBtn3.style.opacity='1';
					}
					else if(num!=aBtn.length&&num>0){
						oAll.checked=false;
						oBtn1.style.opacity=oBtn2.style.opacity=oBtn3.style.opacity='1';
					}else if(num==0){
						oAll.checked=false;
						oBtn1.style.opacity=oBtn2.style.opacity=oBtn3.style.opacity='0.4';
				    }		
		        }		        
			}

		    oAll.onclick=function(){
				if(oAll.checked){
					for(i=0;i<aLi.length;i++){
		                aLi[i].style.background='#E0EEE0';
		                aBtn[i].checked=true;
		                aBtn[i].open=false;//将所有input的开关置为false
					}
					num=aLi.length;
	                oBtn1.style.opacity=oBtn2.style.opacity=oBtn3.style.opacity='1';
				}else{
					for(i=0;i<aLi.length;i++){
		                aLi[i].style.background=aColor[aLi[i].index%2];//恢复原来的的颜色
		                aBtn[i].checked=false;
		                aBtn[i].open=true;
		            }
		            num=0;
		            oBtn1.style.opacity=oBtn2.style.opacity=oBtn3.style.opacity='0.4';
				}
			}
        }
	</script>
</body>
</html>